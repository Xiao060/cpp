# 10.06

## 1

什么是观察者模式？它有哪些特点？

## 2

在封装Linux下互斥锁和条件变量
互斥锁MutexLock和条件变量Condition类的框架如下：

```c++
class MutexLock {  
public:      
    void lock();
    void unlock();

private:  

};   

class Condition {   
public:      
    void wait();
    void notify();
    void notifyall();

private:   

};
```

## 3

实现简单的生产者消费者代码（生产者只需要一个，是一个线程，消费者也只需要一个，也是可以线程），生产者生产的任务可以放在仓库里面，可以定义为一个任务队列，仓库可以使用一个队列queue进行存储，现在存储的数据就用一个int类型即可。

```c++
class TaskQueue {
public:
    TaskQueue(size_t sz);
    bool empty() const;
    bool full() const;
    void push(int);
    int pop();
private:
    size_t _queSize;
    queue<int> _que;
    MutexLock _mutex;
    Condition _notFull;
    Condition _notEmpty;
};

void test() {    
    TaskQueue que(10);    
    Thread * producer(new Producer(que));    
    Thread * consumer(new Consumer(que));    
    producer->start();    
    consumer->start();    
    produer->join();    
    consumer->join();    
    delete producer;    
    delete consumer;
}
```
