7.10

# 7.10

1.  简答题
    
    (a) 从源代码生成可执行程序包含哪几个步骤，请用自己的话描述每个步骤的作用。
    
    > 1.预处理: 将头文件中的内容复制到源代码中去, 或者对宏进行文本替换
    > 
    > 2.编译: 把预处理后的 .i 文件翻译成对应平台的汇编代码
    > 
    > 3.汇编: 把生成的 .o 汇编代码翻译成对应平台的机器代码
    > 
    > 4.链接: 将源文件生成的 .s 文件 与 库文件 进行链接生成可执行文件
    
    (b) 预处理阶段会执行预处理指令，我们讲过哪几种预处理指令?
    
    > 1.头文件包含, 例 #include&lt;stdio.h&gt;
    > 
    > 2.宏定义, 例 #define X 12
    > 
    > 3.宏函数, 例 #define f(x) ((x) * (x))
    
    (c) 什么是进程？进程的虚拟内存空间包含哪几部分？
    
    > 进程: 运行的程序
    > 
    > 虚拟内存空间(从高到低): kernel-stack-heap-date-code, 即 内核-栈-堆-数据空间-程序空间
    
2.  简答题
    
    (a) `double ans = 10.0 + 2.0 / 3.0 − 2.0 ∗ 2.0;`请在适当的位置插入()，使得 ans = 11.0.
    
    > `double ans = 10.0 + 2.0 / ((3.0 − 2.0) ∗ 2.0);`
    
    (b) `double ans = 18.0 / SQUARED(2 + 1);` 如果宏函数定义如下，请写出对应 ans 的值。
    
3.  ```c
    #define SQUARED(x) x*x
    #define SQUARED(x) (x*x)
    #define SQUARED(x) (x)*(x)
    #define SQUARED(x) ((x)*(x))
    ```
    
    > // ans = 18.0 / 2 + 1 * 2 + 1 = 12.0
    > // ans = 18.0 / (2 + 1 * 2 + 1) = 3.6
    > // ans = 18.0 / (2 + 1) * (2 + 1) = 18.0
    > // ans = 18.0 / ((2 + 1) * (2 + 1)) = 2.0
    
    (c) 请解释下面代码为什么错了，并改正它。
    
    ```c
    1) #include <stdio.h>;
    // 头文件包含行末不需要分号
    
    
    2) int function(void arg1){        
           return arg1-1;   
       }
    // 定义函数时, 括号内需要写明参数类型及名称, 填 void 表示无参数; 此处有参数, 应填 arg1 类型, 而不应该填 void 
    
    
    3) #define MESSAGE = "Happy new year!"   
       puts(MESSAGE);
    // 宏定义不需要使用等号
    
    ```